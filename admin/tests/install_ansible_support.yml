---
- name: test install ansible support
  hosts: all:!unmanaged_systems:!localhost
  become: true
  tasks:
    - name: test common packages installed
      package_facts:
      failed_when: "['dmidecode', 'jq', 'python-requests'] is not subset(ansible_facts.packages)"

    - name: test EPEL repo installed
      when: ansible_distribution == 'CentOS'
      assert:
        that:
          - "'epel-release' in ansible_facts.packages"

    - name: test pip installed
      debug:
        msg: TODO implement

    - name: test python-virtualenv installed
      debug:
        msg: TODO implement

    - name: test python selinux module installed
      debug:
        msg: TODO implement

    - debug:
        msg: TODO test install python-apt on Debian machines
